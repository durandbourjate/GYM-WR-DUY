<!DOCTYPE html>
<html lang="de">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>√úbungspool: Kryptographie | Informatik</title>
<style>
  @import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,wght@0,400;0,500;0,600;0,700;1,400&family=DM+Mono:wght@400;500&display=swap');

  :root {
    --c-bg: #f0f2f5;
    --c-surface: #ffffff;
    --c-primary: #1a365d;
    --c-primary-light: #2a5298;
    --c-accent: #e8a838;
    --c-accent-light: #fef3c7;
    --c-success: #16a34a;
    --c-success-bg: #f0fdf4;
    --c-error: #dc2626;
    --c-error-bg: #fef2f2;
    --c-info: #2563eb;
    --c-info-bg: #eff6ff;
    --c-text: #1e293b;
    --c-text-soft: #64748b;
    --c-border: #e2e8f0;
    --c-hover: #f8fafc;
    --radius: 10px;
    --shadow-sm: 0 1px 3px rgba(0,0,0,0.06);
    --shadow-md: 0 4px 12px rgba(0,0,0,0.08);
  }

  * { margin: 0; padding: 0; box-sizing: border-box; }

  body {
    font-family: 'DM Sans', system-ui, sans-serif;
    background: var(--c-bg);
    color: var(--c-text);
    line-height: 1.6;
    min-height: 100vh;
  }

  .app-header {
    background: linear-gradient(135deg, var(--c-primary) 0%, var(--c-primary-light) 100%);
    color: white;
    padding: 20px 24px;
    position: sticky;
    top: 0;
    z-index: 100;
    box-shadow: 0 2px 12px rgba(0,0,0,0.15);
  }
  .app-header h1 { font-size: 1.25rem; font-weight: 700; letter-spacing: -0.02em; }
  .app-header .meta { font-size: 0.8rem; opacity: 0.75; margin-top: 2px; }

  .container { max-width: 720px; margin: 0 auto; padding: 20px 16px 100px; }

  .screen { display: none; }
  .screen.active { display: block; }

  .start-card {
    background: var(--c-surface);
    border-radius: var(--radius);
    padding: 28px;
    margin-bottom: 16px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--c-border);
  }
  .start-card h2 {
    font-size: 1.05rem;
    font-weight: 700;
    margin-bottom: 14px;
    color: var(--c-primary);
    display: flex;
    align-items: center;
    gap: 8px;
  }
  .start-card h2 .icon { font-size: 1.2rem; }

  .mode-cards { display: grid; grid-template-columns: 1fr 1fr; gap: 12px; margin-bottom: 8px; }
  .mode-card {
    padding: 18px 16px;
    border: 2px solid var(--c-border);
    border-radius: var(--radius);
    cursor: pointer;
    transition: all 0.2s;
    text-align: center;
  }
  .mode-card:hover { border-color: var(--c-primary-light); background: var(--c-hover); }
  .mode-card.selected { border-color: var(--c-primary); background: #eef2ff; }
  .mode-card .mode-icon { font-size: 1.8rem; margin-bottom: 6px; }
  .mode-card .mode-title { font-weight: 700; font-size: 0.92rem; margin-bottom: 4px; }
  .mode-card .mode-desc { font-size: 0.78rem; color: var(--c-text-soft); line-height: 1.4; }

  .filter-group { margin-bottom: 16px; }
  .filter-label {
    font-size: 0.8rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.05em;
    color: var(--c-text-soft);
    margin-bottom: 8px;
  }
  .chips { display: flex; flex-wrap: wrap; gap: 6px; }
  .chip {
    padding: 6px 14px;
    border: 1.5px solid var(--c-border);
    border-radius: 20px;
    font-size: 0.82rem;
    font-weight: 500;
    cursor: pointer;
    transition: all 0.15s;
    user-select: none;
    white-space: nowrap;
  }
  .chip:hover { border-color: var(--c-primary-light); }
  .chip.selected { background: var(--c-primary); color: white; border-color: var(--c-primary); }
  .chip .chip-count {
    display: inline-block;
    background: rgba(0,0,0,0.08);
    border-radius: 10px;
    padding: 0 6px;
    font-size: 0.72rem;
    margin-left: 4px;
  }
  .chip.selected .chip-count { background: rgba(255,255,255,0.25); }

  .start-btn {
    width: 100%;
    padding: 14px;
    background: var(--c-primary);
    color: white;
    border: none;
    border-radius: var(--radius);
    font-family: inherit;
    font-size: 1rem;
    font-weight: 700;
    cursor: pointer;
    transition: background 0.2s;
  }
  .start-btn:hover { background: var(--c-primary-light); }
  .start-btn:disabled { opacity: 0.4; cursor: not-allowed; }
  .question-count-info {
    text-align: center;
    font-size: 0.85rem;
    color: var(--c-text-soft);
    margin-bottom: 14px;
    min-height: 1.4em;
  }

  .quiz-topbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    margin-bottom: 16px;
    font-size: 0.82rem;
    color: var(--c-text-soft);
  }
  .quiz-progress-track {
    height: 5px;
    background: var(--c-border);
    border-radius: 3px;
    margin-bottom: 20px;
    overflow: hidden;
  }
  .quiz-progress-fill {
    height: 100%;
    background: var(--c-accent);
    border-radius: 3px;
    transition: width 0.4s ease;
  }

  .q-card {
    background: var(--c-surface);
    border-radius: var(--radius);
    padding: 28px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--c-border);
    margin-bottom: 16px;
    animation: fadeIn 0.3s ease;
  }
  @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }

  .q-badges { display: flex; gap: 6px; margin-bottom: 12px; flex-wrap: wrap; }
  .q-badge {
    font-size: 0.68rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.06em;
    padding: 3px 10px;
    border-radius: 4px;
  }
  .badge-topic { background: #dbeafe; color: #1e40af; }
  .badge-diff-1 { background: #dcfce7; color: #166534; }
  .badge-diff-2 { background: #fef9c3; color: #854d0e; }
  .badge-diff-3 { background: #fee2e2; color: #991b1b; }
  .badge-type { background: #f3e8ff; color: #7c3aed; }
  .badge-tax { background: #e0e7ff; color: #3730a3; }

  .q-text {
    font-size: 1rem;
    font-weight: 600;
    margin-bottom: 18px;
    line-height: 1.55;
  }

  .q-options { display: flex; flex-direction: column; gap: 8px; }
  .q-opt {
    display: flex;
    align-items: flex-start;
    gap: 12px;
    padding: 13px 16px;
    border: 2px solid var(--c-border);
    border-radius: 8px;
    cursor: pointer;
    transition: all 0.15s;
    font-size: 0.92rem;
    line-height: 1.5;
  }
  .q-opt:hover { border-color: #94a3b8; background: var(--c-hover); }
  .q-opt.selected { border-color: var(--c-info); background: var(--c-info-bg); }
  .q-opt.correct { border-color: var(--c-success); background: var(--c-success-bg); }
  .q-opt.wrong { border-color: var(--c-error); background: var(--c-error-bg); }
  .q-opt.was-correct { border-color: var(--c-success); background: var(--c-success-bg); }
  .q-opt.locked { cursor: default; pointer-events: none; }
  .q-opt-marker {
    width: 26px; height: 26px; min-width: 26px;
    border: 2px solid #cbd5e1;
    border-radius: 50%;
    display: flex; align-items: center; justify-content: center;
    font-size: 0.75rem; font-weight: 700; color: #94a3b8;
    transition: all 0.15s;
  }
  .q-opt.selected .q-opt-marker { border-color: var(--c-info); color: var(--c-info); }
  .q-opt.correct .q-opt-marker { border-color: var(--c-success); color: white; background: var(--c-success); }
  .q-opt.wrong .q-opt-marker { border-color: var(--c-error); color: white; background: var(--c-error); }
  .q-opt.was-correct .q-opt-marker { border-color: var(--c-success); color: white; background: var(--c-success); }

  .q-fill-input {
    display: inline-block;
    border: none;
    border-bottom: 2px solid var(--c-info);
    background: #f8fafc;
    padding: 3px 6px;
    font-family: inherit;
    font-size: 0.92rem;
    width: 180px;
    text-align: center;
    outline: none;
    transition: all 0.2s;
  }
  .q-fill-input:focus { border-color: var(--c-primary); background: var(--c-info-bg); }
  .q-fill-input.correct { border-color: var(--c-success); background: var(--c-success-bg); color: #166534; }
  .q-fill-input.wrong { border-color: var(--c-error); background: var(--c-error-bg); color: #991b1b; }

  .q-calc-input {
    width: 90px;
    padding: 7px 10px;
    border: 2px solid var(--c-border);
    border-radius: 6px;
    font-family: 'DM Mono', monospace;
    font-size: 0.9rem;
    text-align: right;
    outline: none;
  }
  .q-calc-input:focus { border-color: var(--c-info); }
  .q-calc-input.correct { border-color: var(--c-success); background: var(--c-success-bg); }
  .q-calc-input.wrong { border-color: var(--c-error); background: var(--c-error-bg); }

  .q-feedback {
    margin-top: 16px;
    padding: 14px 18px;
    border-radius: 8px;
    font-size: 0.88rem;
    line-height: 1.55;
    display: none;
  }
  .q-feedback.visible { display: block; animation: fadeIn 0.25s ease; }
  .q-feedback.success { background: var(--c-success-bg); border: 1px solid #bbf7d0; color: #166534; }
  .q-feedback.error { background: var(--c-error-bg); border: 1px solid #fecaca; color: #991b1b; }

  .btn {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 10px 20px;
    border: none;
    border-radius: 8px;
    font-family: inherit;
    font-size: 0.88rem;
    font-weight: 600;
    cursor: pointer;
    transition: all 0.15s;
  }
  .btn-check { background: var(--c-primary); color: white; }
  .btn-check:hover { background: var(--c-primary-light); }
  .btn-next { background: var(--c-accent); color: var(--c-primary); }
  .btn-next:hover { background: #d4952e; }
  .btn-stop { background: #fee2e2; color: var(--c-error); }
  .btn-stop:hover { background: #fecaca; }
  .btn-row { display: flex; gap: 8px; margin-top: 16px; flex-wrap: wrap; }

  .results-card {
    background: var(--c-surface);
    border-radius: var(--radius);
    padding: 28px;
    box-shadow: var(--shadow-sm);
    border: 1px solid var(--c-border);
    margin-bottom: 16px;
    text-align: center;
  }
  .results-score {
    font-size: 3rem;
    font-weight: 700;
    color: var(--c-primary);
    line-height: 1;
    margin: 12px 0;
    font-family: 'DM Mono', monospace;
  }
  .results-label { font-size: 0.85rem; color: var(--c-text-soft); }
  .results-bar {
    height: 8px;
    background: var(--c-border);
    border-radius: 4px;
    margin: 16px 0;
    overflow: hidden;
  }
  .results-bar-fill {
    height: 100%;
    border-radius: 4px;
    transition: width 0.6s ease;
  }

  .topic-breakdown { text-align: left; margin-top: 16px; }
  .topic-row {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 8px 0;
    border-bottom: 1px solid var(--c-border);
    font-size: 0.88rem;
  }
  .topic-row:last-child { border-bottom: none; }
  .topic-row .topic-name { font-weight: 500; }
  .topic-row .topic-score { font-family: 'DM Mono', monospace; font-weight: 600; }
  .topic-score.good { color: var(--c-success); }
  .topic-score.ok { color: #d97706; }
  .topic-score.bad { color: var(--c-error); }

  .wrong-list { text-align: left; margin-top: 16px; }
  .wrong-item {
    padding: 14px 16px;
    background: var(--c-error-bg);
    border-radius: 8px;
    margin-bottom: 8px;
    font-size: 0.88rem;
    border: 1px solid #fecaca;
  }
  .wrong-item .wi-q { font-weight: 600; margin-bottom: 6px; color: #991b1b; }
  .wrong-item .wi-a { color: #166534; }

  @media print {
    .app-header { position: static !important; box-shadow: none !important; }
    .btn, .quiz-topbar, .q-badges .badge-type, .q-badges .badge-tax { display: none !important; }
    .q-card { break-inside: avoid; box-shadow: none !important; }
    .q-feedback.visible { display: block !important; }
  }

  @media (max-width: 600px) {
    .container { padding: 14px 10px 80px; }
    .start-card, .q-card, .results-card { padding: 20px 16px; }
    .mode-cards { grid-template-columns: 1fr; }
  }
</style>
</head>
<body>

<div class="app-header">
  <h1>√úbungspool: Kryptographie</h1>
  <div class="meta">Informatik ¬∑ Gymnasium Hofwil ¬∑ Individuell √ºben</div>
</div>

<div class="container">

  <!-- START SCREEN -->
  <div class="screen active" id="startScreen">
    <div class="start-card">
      <h2><span class="icon">üéØ</span> Modus w√§hlen</h2>
      <div class="mode-cards">
        <div class="mode-card selected" data-mode="fokus" onclick="selectMode(this)">
          <div class="mode-icon">üîç</div>
          <div class="mode-title">Fokus</div>
          <div class="mode-desc">√úben Sie gezielt ein Unterthema ‚Äî von einfach nach schwierig.</div>
        </div>
        <div class="mode-card" data-mode="mix" onclick="selectMode(this)">
          <div class="mode-icon">üîÄ</div>
          <div class="mode-title">Mix</div>
          <div class="mode-desc">Zuf√§llige Mischung aller Themen ‚Äî ideal zur Repetition.</div>
        </div>
      </div>
    </div>

    <div class="start-card" id="filterCard">
      <h2><span class="icon">‚öôÔ∏è</span> √úbungen anpassen</h2>
      <div class="filter-group">
        <div class="filter-label">Unterthema</div>
        <div class="chips" id="topicChips"></div>
      </div>
      <div class="filter-group">
        <div class="filter-label">Schwierigkeit</div>
        <div class="chips" id="diffChips">
          <div class="chip" data-diff="1" onclick="toggleChip(this, 'diff')">‚≠ê Einfach</div>
          <div class="chip" data-diff="2" onclick="toggleChip(this, 'diff')">‚≠ê‚≠ê Mittel</div>
          <div class="chip" data-diff="3" onclick="toggleChip(this, 'diff')">‚≠ê‚≠ê‚≠ê Schwer</div>
        </div>
      </div>
      <div class="filter-group">
        <div class="filter-label">Fragetyp</div>
        <div class="chips" id="typeChips">
          <div class="chip selected" data-type="mc" onclick="toggleChip(this, 'type')">Multiple Choice</div>
          <div class="chip selected" data-type="tf" onclick="toggleChip(this, 'type')">Richtig/Falsch</div>
          <div class="chip selected" data-type="fill" onclick="toggleChip(this, 'type')">L√ºckentext</div>
          <div class="chip selected" data-type="calc" onclick="toggleChip(this, 'type')">Berechnung</div>
          <div class="chip selected" data-type="sort" onclick="toggleChip(this, 'type')">Zuordnung</div>
        </div>
      </div>
    </div>

    <div class="start-card">
      <div class="question-count-info" id="questionCountInfo">Laden‚Ä¶</div>
      <button class="start-btn" id="startBtn" onclick="startQuiz()">√úbung starten</button>
    </div>
  </div>

  <!-- QUIZ SCREEN -->
  <div class="screen" id="quizScreen">
    <div class="quiz-topbar">
      <span id="quizCounter">Aufgabe 1 / 10</span>
      <span id="quizScore">0 Punkte</span>
    </div>
    <div class="quiz-progress-track">
      <div class="quiz-progress-fill" id="quizProgressFill"></div>
    </div>
    <div id="quizContent"></div>
    <div class="btn-row" style="justify-content:center; margin-top:12px;">
      <button class="btn btn-stop" onclick="endQuiz()">√úbung beenden</button>
    </div>
  </div>

  <!-- RESULTS SCREEN -->
  <div class="screen" id="resultsScreen">
    <div class="results-card">
      <h2 style="justify-content:center;">Zusammenfassung</h2>
      <div class="results-score" id="resultsScore">0/0</div>
      <div class="results-label" id="resultsLabel">Punkte erreicht</div>
      <div class="results-bar"><div class="results-bar-fill" id="resultsBarFill"></div></div>
      <div class="topic-breakdown" id="topicBreakdown"></div>
    </div>
    <div class="results-card" id="wrongCard" style="display:none;">
      <h2 style="justify-content:center; color:var(--c-error);">Zum Repetieren</h2>
      <div class="wrong-list" id="wrongList"></div>
    </div>
    <div class="results-card">
      <button class="start-btn" onclick="exportResults()">üìÑ Als PDF speichern</button>
      <div style="height:10px;"></div>
      <button class="start-btn" style="background:var(--c-accent); color:var(--c-primary);" onclick="resetApp()">Neue √úbung starten</button>
    </div>
  </div>
</div>

<script>
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// AUFGABENPOOL
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
const QUESTIONS = [

  // ‚îÄ‚îÄ SICHERHEITSZIELE ‚îÄ‚îÄ
  {id:"s01", topic:"sicherheit", type:"mc", diff:1, tax:"K1",
   q:"Welches Sicherheitsziel beschreibt, dass eine Nachricht nur vom vorgesehenen Empf√§nger gelesen werden kann?",
   options:[
     {v:"A", t:"Integrit√§t"},
     {v:"B", t:"Vertraulichkeit"},
     {v:"C", t:"Authentizit√§t"},
     {v:"D", t:"Verf√ºgbarkeit"}
   ],
   correct:"B",
   explain:"Vertraulichkeit (Confidentiality) bedeutet, dass nur autorisierte Personen Zugang zu einer Information haben. Integrit√§t betrifft die Unver√§ndertheit, Authentizit√§t die Echtheit des Absenders, Verf√ºgbarkeit die Erreichbarkeit."
  },
  {id:"s02", topic:"sicherheit", type:"mc", diff:1, tax:"K1",
   q:"Welches Sicherheitsziel ist verletzt, wenn Eve eine Nachricht zwischen Alice und Bob unbemerkt ver√§ndert?",
   options:[
     {v:"A", t:"Vertraulichkeit"},
     {v:"B", t:"Verf√ºgbarkeit"},
     {v:"C", t:"Integrit√§t"},
     {v:"D", t:"Authentizit√§t"}
   ],
   correct:"C",
   explain:"Integrit√§t bedeutet, dass Daten vollst√§ndig und unver√§ndert sind. Wenn Eve die Nachricht ver√§ndert (Teile l√∂scht, hinzuf√ºgt oder √§ndert), ist die Integrit√§t verletzt ‚Äî auch wenn sie die Nachricht gar nicht lesen kann."
  },
  {id:"s03", topic:"sicherheit", type:"tf", diff:1, tax:"K1",
   q:"Authentizit√§t bedeutet, dass man sicher sein kann, mit wem man kommuniziert.",
   correct: true,
   explain:"Richtig. Authentizit√§t (Authentication) stellt sicher, dass der Kommunikationspartner tats√§chlich die Person ist, die er vorgibt zu sein. Ohne Authentizit√§t k√∂nnte sich Eve als Bob ausgeben."
  },
  {id:"s04", topic:"sicherheit", type:"tf", diff:2, tax:"K2",
   q:"Wenn Eve eine Nachricht von Alice mitlesen kann, ist sowohl die Vertraulichkeit als auch die Integrit√§t verletzt.",
   correct: false,
   explain:"Falsch. Wenn Eve nur mitlest, ist die Vertraulichkeit verletzt. Die Integrit√§t ist nur dann verletzt, wenn Eve die Nachricht auch ver√§ndert. Mitlesen allein ver√§ndert die Nachricht nicht."
  },
  {id:"s05", topic:"sicherheit", type:"sort", diff:1, tax:"K2",
   q:"Ordnen Sie die Situationen dem jeweils verletzten Sicherheitsziel zu.",
   categories:["Vertraulichkeit verletzt", "Integrit√§t verletzt", "Authentizit√§t verletzt"],
   items:[
     {t:"Eve liest Alices E-Mail", cat:0},
     {t:"Eve ver√§ndert den Betrag in einer √úberweisung", cat:1},
     {t:"Eve gibt sich als Bob aus", cat:2},
     {t:"Ein Hacker kopiert vertrauliche Daten", cat:0},
     {t:"Ein Virus ver√§ndert eine gespeicherte Datei", cat:1},
     {t:"Eine Phishing-Mail t√§uscht eine Bank vor", cat:2}
   ],
   explain:"Vertraulichkeit: unbefugtes Lesen/Kopieren. Integrit√§t: unbefugtes Ver√§ndern von Daten. Authentizit√§t: sich als jemand anderes ausgeben (Identit√§tsdiebstahl, Phishing)."
  },
  {id:"s06", topic:"sicherheit", type:"mc", diff:2, tax:"K3",
   q:"Alice verschickt eine Postkarte an Bob. Welche Sicherheitsziele sind potenziell gef√§hrdet?",
   options:[
     {v:"A", t:"Nur Vertraulichkeit ‚Äî jeder kann die Karte lesen."},
     {v:"B", t:"Vertraulichkeit und Integrit√§t ‚Äî jeder kann lesen und die Karte k√∂nnte ver√§ndert werden."},
     {v:"C", t:"Alle vier Sicherheitsziele sind gef√§hrdet."},
     {v:"D", t:"Keines ‚Äî Postkarten sind ein sicheres Kommunikationsmittel."}
   ],
   correct:"C",
   explain:"Postkarten sind unsicher in allen Dimensionen: Jeder kann sie lesen (Vertraulichkeit), der Inhalt k√∂nnte ver√§ndert werden (Integrit√§t), der Absender k√∂nnte gef√§lscht sein (Authentizit√§t), und die Karte k√∂nnte verloren gehen (Verf√ºgbarkeit)."
  },
  {id:"s07", topic:"sicherheit", type:"fill", diff:1, tax:"K1",
   q:"Die vier zentralen Sicherheitsziele der Informationssicherheit sind: {0}, {1}, {2} und {3}.",
   blanks:[
     {answer:"Vertraulichkeit", alts:["vertraulichkeit", "Confidentiality"]},
     {answer:"Integrit√§t", alts:["integrit√§t", "Integrity"]},
     {answer:"Authentizit√§t", alts:["authentizit√§t", "Authentication"]},
     {answer:"Verf√ºgbarkeit", alts:["verf√ºgbarkeit", "Availability"]}
   ],
   explain:"Die vier Sicherheitsziele: Vertraulichkeit (nur Berechtigte lesen), Integrit√§t (Daten unver√§ndert), Authentizit√§t (Identit√§t gesichert), Verf√ºgbarkeit (System erreichbar)."
  },
  {id:"s08", topic:"sicherheit", type:"mc", diff:2, tax:"K3",
   q:"Im Einstiegsspiel zur Kryptologie versuchen Alice und Bob eine geheime Nachricht zu √ºbermitteln, w√§hrend Eve mith√∂rt. In welchem Szenario ist es am schwierigsten, die Vertraulichkeit zu gew√§hrleisten?",
   options:[
     {v:"A", t:"A und B k√∂nnen vorher unter Ausschluss von Eve kommunizieren."},
     {v:"B", t:"A und B k√∂nnen vorher kommunizieren, aber Eve h√∂rt zu."},
     {v:"C", t:"A und B k√∂nnen vorher gar nicht kommunizieren."},
     {v:"D", t:"Alle drei Szenarien sind gleich schwierig."}
   ],
   correct:"C",
   explain:"Wenn Alice und Bob vorher gar nicht kommunizieren k√∂nnen, k√∂nnen sie sich nicht auf ein Verschl√ºsselungsverfahren oder einen Schl√ºssel einigen. Das entspricht dem Problem der asymmetrischen Kryptographie ‚Äî wie tauscht man Schl√ºssel aus, wenn der Kanal nicht sicher ist?"
  },

  // ‚îÄ‚îÄ VERSCHL√úSSELUNG GRUNDLAGEN ‚îÄ‚îÄ
  {id:"v01", topic:"verschluesselung", type:"mc", diff:1, tax:"K1",
   q:"Was ist der Unterschied zwischen Kryptographie und Kryptoanalyse?",
   options:[
     {v:"A", t:"Kryptographie verschl√ºsselt, Kryptoanalyse entschl√ºsselt ohne Schl√ºssel (=knackt Verschl√ºsselung)."},
     {v:"B", t:"Kryptographie ist √§lter als Kryptoanalyse."},
     {v:"C", t:"Kryptographie ist symmetrisch, Kryptoanalyse ist asymmetrisch."},
     {v:"D", t:"Es gibt keinen Unterschied ‚Äî beide Begriffe meinen dasselbe."}
   ],
   correct:"A",
   explain:"Kryptographie ist die Wissenschaft vom Verschl√ºsseln von Nachrichten. Kryptoanalyse ist die Wissenschaft vom Brechen von Verschl√ºsselungen ‚Äî also dem Entschl√ºsseln ohne Kenntnis des Schl√ºssels. Zusammen bilden sie die Kryptologie."
  },
  {id:"v02", topic:"verschluesselung", type:"fill", diff:1, tax:"K1",
   q:"Die Wissenschaft, die sich mit Ver- und Entschl√ºsselung besch√§ftigt, heisst {0}. Sie besteht aus der {1} (Verschl√ºsseln) und der {2} (Brechen von Verschl√ºsselungen).",
   blanks:[
     {answer:"Kryptologie", alts:["kryptologie"]},
     {answer:"Kryptographie", alts:["kryptographie", "Kryptografie", "kryptografie"]},
     {answer:"Kryptoanalyse", alts:["kryptoanalyse"]}
   ],
   explain:"Kryptologie = Kryptographie (Verschl√ºsseln) + Kryptoanalyse (Entschl√ºsseln/Brechen)."
  },
  {id:"v03", topic:"verschluesselung", type:"mc", diff:1, tax:"K1",
   q:"Wie nennt man den unverschl√ºsselten Originaltext in der Kryptographie?",
   options:[
     {v:"A", t:"Chiffretext (Ciphertext)"},
     {v:"B", t:"Schl√ºsseltext"},
     {v:"C", t:"Klartext (Plaintext)"},
     {v:"D", t:"Quelltext"}
   ],
   correct:"C",
   explain:"Der unverschl√ºsselte Text heisst Klartext (Plaintext). Der verschl√ºsselte Text heisst Chiffretext oder Geheimtext (Ciphertext). Der Schl√ºssel (Key) bestimmt, wie der Klartext in den Chiffretext umgewandelt wird."
  },
  {id:"v04", topic:"verschluesselung", type:"tf", diff:1, tax:"K2",
   q:"Bei der Caesar-Verschl√ºsselung wird jeder Buchstabe im Alphabet um eine feste Anzahl Stellen verschoben.",
   correct: true,
   explain:"Richtig. Die Caesar-Verschl√ºsselung ist eine einfache Substitutionschiffre. Beispiel mit Verschiebung 3: A‚ÜíD, B‚ÜíE, C‚ÜíF usw. Sie ist nach Julius Caesar benannt, der sie f√ºr milit√§rische Nachrichten nutzte."
  },
  {id:"v05", topic:"verschluesselung", type:"calc", diff:2, tax:"K3",
   q:"Verschl√ºsseln Sie die folgenden Buchstaben mit der Caesar-Verschl√ºsselung (Verschiebung = 3). Geben Sie die Position des verschl√ºsselten Buchstabens im Alphabet ein (A=1, B=2, ... Z=26).",
   rows:[
     {label:"A (Position 1) wird zu:", answer:4, tolerance:0, unit:"(=D)"},
     {label:"H (Position 8) wird zu:", answer:11, tolerance:0, unit:"(=K)"},
     {label:"X (Position 24) wird zu:", answer:1, tolerance:0, unit:"(=A)"}
   ],
   explain:"A(1)+3=D(4), H(8)+3=K(11), X(24)+3=A(1) ‚Äî bei X wird ¬´umgebrochen¬ª: 24+3=27, und 27 mod 26 = 1 (=A). Diese Modulo-Rechnung ist zentral in der Kryptographie."
  },
  {id:"v06", topic:"verschluesselung", type:"mc", diff:2, tax:"K2",
   q:"Warum ist die Caesar-Verschl√ºsselung unsicher?",
   options:[
     {v:"A", t:"Weil es nur 26 m√∂gliche Schl√ºssel gibt ‚Äî man kann alle durchprobieren (Brute Force)."},
     {v:"B", t:"Weil der Schl√ºssel immer 3 ist."},
     {v:"C", t:"Weil sie nur auf Latein funktioniert."},
     {v:"D", t:"Weil Computer sie nicht berechnen k√∂nnen."}
   ],
   correct:"A",
   explain:"Bei 26 Buchstaben gibt es nur 25 sinnvolle Verschiebungen (0 w√§re keine Verschl√ºsselung). Ein Angreifer kann einfach alle 25 M√∂glichkeiten durchprobieren ‚Äî ein sogenannter Brute-Force-Angriff. Zudem verr√§t die H√§ufigkeitsanalyse der Buchstaben viel √ºber den Klartext."
  },
  {id:"v07", topic:"verschluesselung", type:"tf", diff:2, tax:"K2",
   q:"Die Vigen√®re-Verschl√ºsselung ist sicherer als die Caesar-Verschl√ºsselung, weil sie mehrere verschiedene Verschiebungen verwendet.",
   correct: true,
   explain:"Richtig. Bei Vigen√®re wird ein Schl√ºsselwort verwendet (z.B. ¬´SCHLUESSEL¬ª). Jeder Buchstabe des Klartextes wird um eine andere Anzahl verschoben, abh√§ngig vom jeweiligen Buchstaben des Schl√ºsselwortes. Dadurch ist eine einfache H√§ufigkeitsanalyse nicht mehr m√∂glich."
  },
  {id:"v08", topic:"verschluesselung", type:"mc", diff:3, tax:"K4",
   q:"Eine H√§ufigkeitsanalyse zeigt, dass in einem mit Caesar verschl√ºsselten deutschen Text der Buchstabe 'H' am h√§ufigsten vorkommt. Was l√§sst sich daraus schliessen?",
   options:[
     {v:"A", t:"Der Schl√ºssel ist wahrscheinlich 3, weil H der dritth√§ufigste Buchstabe im Deutschen ist."},
     {v:"B", t:"Der h√§ufigste Buchstabe im Deutschen ist 'E'. 'H' liegt 3 Stellen nach 'E', also ist der Schl√ºssel vermutlich 3."},
     {v:"C", t:"Die Verschl√ºsselung ist nicht Caesar, sondern Vigen√®re."},
     {v:"D", t:"Man kann daraus nichts schliessen."}
   ],
   correct:"B",
   explain:"Im Deutschen ist 'E' mit Abstand der h√§ufigste Buchstabe. Wenn im Chiffretext 'H' am h√§ufigsten vorkommt und H drei Stellen nach E liegt (E‚ÜíF‚ÜíG‚ÜíH), ist der Schl√ºssel h√∂chstwahrscheinlich 3. Das ist das Prinzip der H√§ufigkeitsanalyse."
  },

  // ‚îÄ‚îÄ SYMMETRISCH vs. ASYMMETRISCH ‚îÄ‚îÄ
  {id:"a01", topic:"symmasymm", type:"mc", diff:1, tax:"K1",
   q:"Was ist das Hauptmerkmal der symmetrischen Verschl√ºsselung?",
   options:[
     {v:"A", t:"Es werden zwei verschiedene Schl√ºssel verwendet."},
     {v:"B", t:"Sender und Empf√§nger verwenden denselben Schl√ºssel."},
     {v:"C", t:"Der Schl√ºssel ist √∂ffentlich bekannt."},
     {v:"D", t:"Nur der Empf√§nger hat einen Schl√ºssel."}
   ],
   correct:"B",
   explain:"Bei symmetrischer Verschl√ºsselung verwenden Sender und Empf√§nger denselben geheimen Schl√ºssel ‚Äî sowohl zum Verschl√ºsseln als auch zum Entschl√ºsseln. Das Hauptproblem: Wie tauscht man den Schl√ºssel sicher aus?"
  },
  {id:"a02", topic:"symmasymm", type:"mc", diff:1, tax:"K1",
   q:"Bei der asymmetrischen Verschl√ºsselung gibt es zwei Schl√ºssel. Wie heissen sie?",
   options:[
     {v:"A", t:"Master Key und Session Key"},
     {v:"B", t:"√ñffentlicher Schl√ºssel (Public Key) und privater Schl√ºssel (Private Key)"},
     {v:"C", t:"Verschl√ºsselungsschl√ºssel und Entschl√ºsselungsschl√ºssel"},
     {v:"D", t:"Prim√§rschl√ºssel und Sekund√§rschl√ºssel"}
   ],
   correct:"B",
   explain:"Asymmetrische Verschl√ºsselung nutzt ein Schl√ºsselpaar: Der √∂ffentliche Schl√ºssel (Public Key) kann frei verteilt werden und dient zum Verschl√ºsseln. Der private Schl√ºssel (Private Key) bleibt geheim und dient zum Entschl√ºsseln."
  },
  {id:"a03", topic:"symmasymm", type:"tf", diff:2, tax:"K2",
   q:"Bei asymmetrischer Verschl√ºsselung kann eine Nachricht, die mit dem √∂ffentlichen Schl√ºssel verschl√ºsselt wurde, nur mit dem zugeh√∂rigen privaten Schl√ºssel entschl√ºsselt werden.",
   correct: true,
   explain:"Richtig. Das ist das Grundprinzip: Was mit dem Public Key verschl√ºsselt wurde, kann nur der Besitzer des Private Keys entschl√ºsseln. Selbst der Sender kann seine eigene Nachricht nicht mehr entschl√ºsseln, sobald sie mit dem Public Key des Empf√§ngers verschl√ºsselt ist."
  },
  {id:"a04", topic:"symmasymm", type:"sort", diff:2, tax:"K2",
   q:"Ordnen Sie die Eigenschaften der symmetrischen oder asymmetrischen Verschl√ºsselung zu.",
   categories:["Symmetrisch", "Asymmetrisch"],
   items:[
     {t:"Ein gemeinsamer geheimer Schl√ºssel", cat:0},
     {t:"Schl√ºsselpaar: √∂ffentlich + privat", cat:1},
     {t:"Schnelle Berechnung", cat:0},
     {t:"L√∂st das Schl√ºsselaustausch-Problem", cat:1},
     {t:"Caesar- und Vigen√®re-Chiffre", cat:0},
     {t:"RSA-Verfahren", cat:1}
   ],
   explain:"Symmetrisch: ein Schl√ºssel, schnell, aber Schl√ºsselaustausch problematisch. Asymmetrisch: Schl√ºsselpaar, langsamer, aber kein geheimer Schl√ºsselaustausch n√∂tig. In der Praxis werden oft beide kombiniert (z.B. TLS/HTTPS)."
  },
  {id:"a05", topic:"symmasymm", type:"mc", diff:2, tax:"K2",
   q:"Warum ist der Schl√ºsselaustausch bei symmetrischer Verschl√ºsselung ein Problem?",
   options:[
     {v:"A", t:"Weil der Schl√ºssel zu lang ist, um ihn zu merken."},
     {v:"B", t:"Weil Sender und Empf√§nger den gleichen geheimen Schl√ºssel brauchen, ihn aber √ºber einen unsicheren Kanal austauschen m√ºssen."},
     {v:"C", t:"Weil symmetrische Schl√ºssel ablaufen und erneuert werden m√ºssen."},
     {v:"D", t:"Weil es zu viele m√∂gliche Schl√ºssel gibt."}
   ],
   correct:"B",
   explain:"Das Schl√ºsselaustausch-Problem: Alice und Bob brauchen denselben geheimen Schl√ºssel. Aber wie teilen sie ihn, wenn Eve den Kommunikationskanal abh√∂rt? Genau dieses Problem l√∂st die asymmetrische Verschl√ºsselung, bei der der √∂ffentliche Schl√ºssel offen verteilt werden kann."
  },
  {id:"a06", topic:"symmasymm", type:"mc", diff:3, tax:"K3",
   q:"Alice m√∂chte Bob eine verschl√ºsselte Nachricht schicken. Welchen Schl√ºssel verwendet sie bei asymmetrischer Verschl√ºsselung?",
   options:[
     {v:"A", t:"Alices privaten Schl√ºssel"},
     {v:"B", t:"Bobs √∂ffentlichen Schl√ºssel"},
     {v:"C", t:"Alices √∂ffentlichen Schl√ºssel"},
     {v:"D", t:"Bobs privaten Schl√ºssel"}
   ],
   correct:"B",
   explain:"Alice verschl√ºsselt mit Bobs √∂ffentlichem Schl√ºssel. Nur Bob kann die Nachricht dann mit seinem privaten Schl√ºssel entschl√ºsseln. Alice darf Bobs privaten Schl√ºssel gar nicht kennen ‚Äî sonst w√§re das System unsicher."
  },
  {id:"a07", topic:"symmasymm", type:"tf", diff:2, tax:"K2",
   q:"In der Praxis wird oft symmetrische und asymmetrische Verschl√ºsselung kombiniert: Der symmetrische Schl√ºssel wird asymmetrisch ausgetauscht, die eigentlichen Daten werden dann symmetrisch verschl√ºsselt.",
   correct: true,
   explain:"Richtig. Dieses Hybridverfahren nutzt die St√§rken beider Methoden: Asymmetrische Verschl√ºsselung l√∂st das Schl√ºsselaustausch-Problem, symmetrische Verschl√ºsselung ist schnell f√ºr grosse Datenmengen. So funktioniert z.B. HTTPS (TLS)."
  },
  {id:"a08", topic:"symmasymm", type:"mc", diff:3, tax:"K4",
   q:"Welches Szenario aus dem Einstiegsspiel entspricht am ehesten dem Problem der symmetrischen Verschl√ºsselung?",
   options:[
     {v:"A", t:"Szenario 1: A und B k√∂nnen vorher nicht kommunizieren."},
     {v:"B", t:"Szenario 2: A und B k√∂nnen vorher kommunizieren, C h√∂rt zu."},
     {v:"C", t:"Szenario 3: A und B k√∂nnen vorher unter Ausschluss von C kommunizieren."},
     {v:"D", t:"Keines der Szenarien."}
   ],
   correct:"C",
   explain:"Symmetrische Verschl√ºsselung funktioniert gut, wenn Alice und Bob einen geheimen Schl√ºssel vereinbaren k√∂nnen, ohne dass Eve mith√∂rt (Szenario 3). Das Problem entsteht in Szenario 2 (Eve h√∂rt zu) ‚Äî dann braucht man asymmetrische Verfahren."
  },

  // ‚îÄ‚îÄ BLOCKCHAIN ‚îÄ‚îÄ
  {id:"b01", topic:"blockchain", type:"mc", diff:1, tax:"K1",
   q:"Was ist eine Blockchain grunds√§tzlich?",
   options:[
     {v:"A", t:"Eine besonders schnelle Datenbank."},
     {v:"B", t:"Eine Kette von Datenbl√∂cken, bei der jeder Block kryptographisch mit dem vorherigen verkn√ºpft ist."},
     {v:"C", t:"Ein Computervirus, der sich √ºber das Internet verbreitet."},
     {v:"D", t:"Ein Verschl√ºsselungsverfahren f√ºr E-Mails."}
   ],
   correct:"B",
   explain:"Eine Blockchain ist eine dezentrale Datenstruktur: Daten werden in Bl√∂cken gespeichert, die chronologisch aneinandergeh√§ngt werden. Jeder Block enth√§lt einen kryptographischen Hash des vorherigen Blocks, wodurch nachtr√§gliche √Ñnderungen sofort auffallen."
  },
  {id:"b02", topic:"blockchain", type:"tf", diff:1, tax:"K1",
   q:"Bitcoin ist eine Kryptow√§hrung, die auf der Blockchain-Technologie basiert.",
   correct: true,
   explain:"Richtig. Bitcoin war die erste grosse Anwendung der Blockchain-Technologie. Die Blockchain dient als dezentrales, √∂ffentliches Kassenbuch, das alle Transaktionen f√§lschungssicher aufzeichnet ‚Äî ohne dass eine Bank oder Nationalbank n√∂tig ist."
  },
  {id:"b03", topic:"blockchain", type:"mc", diff:2, tax:"K2",
   q:"Welche Rolle √ºbernimmt die Blockchain-Technologie, die traditionell von Institutionen wie Banken erf√ºllt wird?",
   options:[
     {v:"A", t:"Die Rolle des Gesetzgebers"},
     {v:"B", t:"Die Vertrauensrolle ‚Äî sie garantiert, dass Transaktionen korrekt und nicht manipuliert sind."},
     {v:"C", t:"Die Rolle des Kreditgebers"},
     {v:"D", t:"Die Rolle der Regulierungsbeh√∂rde"}
   ],
   correct:"B",
   explain:"Traditionell vertrauen wir Banken, dass sie Transaktionen korrekt abwickeln und Kontost√§nde stimmen. Die Blockchain ersetzt dieses institutionelle Vertrauen durch mathematisches Vertrauen: Kryptographische Verfahren und das dezentrale Netzwerk garantieren die Korrektheit."
  },
  {id:"b04", topic:"blockchain", type:"tf", diff:2, tax:"K2",
   q:"Die Blockchain kann nur f√ºr Kryptow√§hrungen wie Bitcoin verwendet werden.",
   correct: false,
   explain:"Falsch. Die Blockchain-Technologie hat viele m√∂gliche Anwendungen √ºber Kryptow√§hrungen hinaus: Smart Contracts, Supply-Chain-Management, digitale Identit√§ten, Grundbucheintr√§ge, Abstimmungssysteme, NFTs und viele mehr."
  },
  {id:"b05", topic:"blockchain", type:"sort", diff:2, tax:"K2",
   q:"Ordnen Sie zu: Welche Aussagen treffen auf die Blockchain zu und welche nicht?",
   categories:["Trifft zu", "Trifft nicht zu"],
   items:[
     {t:"Dezentral ‚Äî keine zentrale Kontrollinstanz", cat:0},
     {t:"Nachtr√§gliche √Ñnderungen sind leicht m√∂glich", cat:1},
     {t:"Jeder Block ist mit dem vorherigen kryptographisch verkn√ºpft", cat:0},
     {t:"Nur Banken k√∂nnen Transaktionen verifizieren", cat:1},
     {t:"Alle Transaktionen sind transparent einsehbar", cat:0},
     {t:"Ben√∂tigt schnellere Computer als herk√∂mmliche Datenbanken", cat:1}
   ],
   explain:"Blockchain: dezentral, kryptographisch verkn√ºpft, transparent und manipulationssicher. Nachtr√§gliche √Ñnderungen sind praktisch unm√∂glich (ein ge√§nderter Block w√ºrde den Hash √§ndern und die ganze Kette ung√ºltig machen)."
  },
  {id:"b06", topic:"blockchain", type:"mc", diff:3, tax:"K4",
   q:"Warum ist es praktisch unm√∂glich, einen bereits best√§tigten Block in der Blockchain zu manipulieren?",
   options:[
     {v:"A", t:"Weil die Blockchain durch ein Passwort gesch√ºtzt ist."},
     {v:"B", t:"Weil jeder Block den Hash des vorherigen Blocks enth√§lt ‚Äî eine √Ñnderung w√ºrde alle nachfolgenden Hashes ung√ºltig machen und vom Netzwerk sofort erkannt werden."},
     {v:"C", t:"Weil nur eine Person Zugang zur Blockchain hat."},
     {v:"D", t:"Weil die Daten nach 24 Stunden automatisch gel√∂scht werden."}
   ],
   correct:"B",
   explain:"Jeder Block enth√§lt einen kryptographischen Hash des vorherigen Blocks. √Ñndert man Daten in einem Block, √§ndert sich sein Hash, was den Hash des n√§chsten Blocks ung√ºltig macht ‚Äî ein Dominoeffekt. Zudem m√ºsste der Angreifer die Mehrheit des dezentralen Netzwerks kontrollieren (51%-Angriff)."
  },

  // ‚îÄ‚îÄ GESELLSCHAFT & ETHIK ‚îÄ‚îÄ
  {id:"g01", topic:"gesellschaft", type:"mc", diff:2, tax:"K2",
   q:"Im Spannungsfeld ¬´Freiheit vs. Sicherheit¬ª: Warum fordern manche Regierungen Hintert√ºren (Backdoors) in Verschl√ºsselungssystemen?",
   options:[
     {v:"A", t:"Um Software-Updates schneller verteilen zu k√∂nnen."},
     {v:"B", t:"Um bei Verdacht auf Straftaten wie Kinderpornographie oder Terrorismus die verschl√ºsselte Kommunikation √ºberwachen zu k√∂nnen."},
     {v:"C", t:"Um Verschl√ºsselung billiger zu machen."},
     {v:"D", t:"Weil Verschl√ºsselung zu viel Strom verbraucht."}
   ],
   correct:"B",
   explain:"Regierungen argumentieren, dass starke Verschl√ºsselung Kriminellen erm√∂glicht, unentdeckt zu kommunizieren. Backdoors w√ºrden Strafverfolgungsbeh√∂rden Zugang erm√∂glichen. Kritiker warnen: Eine Hintert√ºr f√ºr die Polizei ist auch eine Hintert√ºr f√ºr Hacker und autorit√§re Regime."
  },
  {id:"g02", topic:"gesellschaft", type:"tf", diff:2, tax:"K5",
   q:"Eine Hintert√ºr in Verschl√ºsselungssystemen kann so gebaut werden, dass nur die Polizei sie nutzen kann und Kriminelle keinen Zugang haben.",
   correct: false,
   explain:"Falsch. Technisch ist es nicht m√∂glich, eine Hintert√ºr zu bauen, die nur von ¬´guten¬ª Akteuren genutzt werden kann. Eine Schwachstelle im System ist eine Schwachstelle f√ºr alle ‚Äî Polizei, Geheimdienste, aber auch Hacker und feindliche Staaten. Das ist ein zentrales Argument gegen Backdoors."
  },
  {id:"g03", topic:"gesellschaft", type:"mc", diff:2, tax:"K3",
   q:"In welcher allt√§glichen Situation profitieren Sie pers√∂nlich von kryptographischen Verfahren?",
   options:[
     {v:"A", t:"Beim Lesen einer gedruckten Zeitung."},
     {v:"B", t:"Beim Bezahlen mit Bargeld."},
     {v:"C", t:"Beim Online-Banking und beim Surfen auf HTTPS-Websites."},
     {v:"D", t:"Beim Telefonieren √ºber Festnetz."}
   ],
   correct:"C",
   explain:"HTTPS (das Schloss-Symbol im Browser) nutzt TLS-Verschl√ºsselung, um Ihre Daten zu sch√ºtzen. Online-Banking, E-Mail, Messaging (WhatsApp, Signal) ‚Äî all das basiert auf Kryptographie. Ohne Verschl√ºsselung k√∂nnten Ihre Passw√∂rter, Nachrichten und Bankdaten mitgelesen werden."
  },
  {id:"g04", topic:"gesellschaft", type:"sort", diff:2, tax:"K5",
   q:"Ordnen Sie die Argumente: Welche sprechen F√úR starke Verschl√ºsselung ohne Hintert√ºren und welche F√úR staatliche √úberwachungsm√∂glichkeiten?",
   categories:["F√ºr starke Verschl√ºsselung", "F√ºr √úberwachungsm√∂glichkeit"],
   items:[
     {t:"Schutz der Privatsph√§re als Grundrecht", cat:0},
     {t:"Bek√§mpfung von Terrorismus und organisierter Kriminalit√§t", cat:1},
     {t:"Hintert√ºren k√∂nnen auch von Hackern missbraucht werden", cat:0},
     {t:"Aufdeckung von Kinderpornographie", cat:1},
     {t:"Schutz von Journalisten und Whistleblowern", cat:0},
     {t:"Nationale Sicherheit", cat:1}
   ],
   explain:"Es handelt sich um ein echtes Dilemma ohne einfache L√∂sung: Starke Verschl√ºsselung sch√ºtzt die Privatsph√§re, aber erschwert die Strafverfolgung. Schwache Verschl√ºsselung hilft der Polizei, macht aber alle B√ºrger unsicherer."
  },
  {id:"g05", topic:"gesellschaft", type:"mc", diff:3, tax:"K5",
   q:"In einer Demokratie wird diskutiert, ob der Staat verschl√ºsselte Messenger-Nachrichten lesen d√ºrfen soll. Welches Argument ist aus kryptographischer Sicht am st√§rksten?",
   options:[
     {v:"A", t:"Der Staat braucht Zugang, weil Terroristen Messenger nutzen."},
     {v:"B", t:"Verschl√ºsselung l√§sst sich nicht ¬´ein bisschen¬ª schw√§chen ‚Äî jede Schwachstelle gef√§hrdet alle Nutzer gleichermassen."},
     {v:"C", t:"Messenger-Verschl√ºsselung ist ohnehin leicht zu brechen."},
     {v:"D", t:"Die Polizei kann Nachrichten auch ohne Hintert√ºr lesen."}
   ],
   correct:"B",
   explain:"Aus technischer Sicht ist das st√§rkste Argument: Verschl√ºsselung ist entweder sicher oder unsicher. Man kann keine Hintert√ºr bauen, die nur f√ºr ¬´die Guten¬ª funktioniert. Eine Schw√§chung der Verschl√ºsselung betrifft alle ‚Äî Kriminelle und unbescholtene B√ºrger gleichermassen."
  },
  {id:"g06", topic:"gesellschaft", type:"tf", diff:1, tax:"K2",
   q:"WhatsApp verwendet Ende-zu-Ende-Verschl√ºsselung. Das bedeutet, dass auch WhatsApp selbst die Nachrichten nicht lesen kann.",
   correct: true,
   explain:"Richtig. Bei Ende-zu-Ende-Verschl√ºsselung (E2E) werden die Nachrichten auf dem Ger√§t des Senders verschl√ºsselt und erst auf dem Ger√§t des Empf√§ngers entschl√ºsselt. Weder WhatsApp noch der Internetanbieter k√∂nnen den Inhalt lesen ‚Äî nur Sender und Empf√§nger haben die Schl√ºssel."
  },

  // ‚îÄ‚îÄ ZUS√ÑTZLICHE QUERFRAGEN ‚îÄ‚îÄ
  {id:"x01", topic:"sicherheit", type:"mc", diff:3, tax:"K4",
   q:"Ein Unternehmen wird Opfer einer Ransomware-Attacke: Alle Daten werden verschl√ºsselt und nur gegen L√∂segeld freigegeben. Welche Sicherheitsziele sind verletzt?",
   options:[
     {v:"A", t:"Nur Vertraulichkeit."},
     {v:"B", t:"Nur Verf√ºgbarkeit."},
     {v:"C", t:"Verf√ºgbarkeit und Integrit√§t ‚Äî die Daten sind nicht mehr zug√§nglich und wurden ver√§ndert (verschl√ºsselt)."},
     {v:"D", t:"Alle vier Sicherheitsziele."}
   ],
   correct:"C",
   explain:"Ransomware verletzt prim√§r die Verf√ºgbarkeit (das Unternehmen kann nicht mehr auf seine Daten zugreifen) und die Integrit√§t (die Daten wurden verschl√ºsselt, also ver√§ndert). Die Vertraulichkeit ist nicht zwingend verletzt ‚Äî der Angreifer hat die Daten verschl√ºsselt, aber nicht unbedingt gelesen (obwohl moderne Ransomware oft auch Daten stiehlt)."
  },
  {id:"x02", topic:"verschluesselung", type:"tf", diff:2, tax:"K2",
   q:"Eine Verschl√ºsselung ist nur dann sicher, wenn der Algorithmus (das Verfahren) geheim gehalten wird.",
   correct: false,
   explain:"Falsch. Nach dem Kerckhoffs'schen Prinzip (1883) soll die Sicherheit eines Kryptosystems nur vom Schl√ºssel abh√§ngen, nicht von der Geheimhaltung des Algorithmus. Moderne Verschl√ºsselungsstandards wie AES sind √∂ffentlich bekannt und trotzdem sicher ‚Äî weil der Schl√ºssel geheim bleibt."
  },
  {id:"x03", topic:"symmasymm", type:"mc", diff:3, tax:"K3",
   q:"Bob m√∂chte beweisen, dass eine Nachricht wirklich von ihm stammt (Authentizit√§t). Welchen Schl√ºssel nutzt er daf√ºr bei einer digitalen Signatur?",
   options:[
     {v:"A", t:"Seinen √∂ffentlichen Schl√ºssel"},
     {v:"B", t:"Alices privaten Schl√ºssel"},
     {v:"C", t:"Seinen privaten Schl√ºssel"},
     {v:"D", t:"Einen gemeinsamen symmetrischen Schl√ºssel"}
   ],
   correct:"C",
   explain:"Bei einer digitalen Signatur ¬´unterschreibt¬ª Bob die Nachricht mit seinem privaten Schl√ºssel. Jeder kann mit Bobs √∂ffentlichem Schl√ºssel pr√ºfen, ob die Signatur echt ist. Nur Bob besitzt den privaten Schl√ºssel ‚Äî daher kann nur er die Signatur erstellt haben."
  },
  {id:"x04", topic:"blockchain", type:"mc", diff:2, tax:"K2",
   q:"Was ist ein Hash in der Kryptographie?",
   options:[
     {v:"A", t:"Ein besonders langer Schl√ºssel."},
     {v:"B", t:"Eine Einweg-Funktion, die aus beliebigen Daten eine Zeichenfolge fester L√§nge erzeugt ‚Äî jede √Ñnderung der Daten ergibt einen v√∂llig anderen Hash."},
     {v:"C", t:"Eine Methode zum Komprimieren von Dateien."},
     {v:"D", t:"Ein Passwort f√ºr die Blockchain."}
   ],
   correct:"B",
   explain:"Ein Hash ist ein kryptographischer ¬´Fingerabdruck¬ª von Daten. Egal wie gross die Eingabe ist, der Hash hat immer die gleiche L√§nge. Schon die kleinste √Ñnderung der Daten ergibt einen v√∂llig anderen Hash. Deshalb eignen sich Hashes hervorragend zur Integrit√§tspr√ºfung."
  },
  {id:"x05", topic:"verschluesselung", type:"mc", diff:1, tax:"K1",
   q:"Welche der folgenden Personen wird in der Kryptographie traditionell als Angreiferin bezeichnet?",
   options:[
     {v:"A", t:"Alice"},
     {v:"B", t:"Bob"},
     {v:"C", t:"Eve"},
     {v:"D", t:"Carol"}
   ],
   correct:"C",
   explain:"In der Kryptographie gibt es traditionelle Rollennamen: Alice und Bob sind die Kommunikationspartner, Eve (von ¬´Eavesdropper¬ª = Lauscherin) ist die Angreiferin. Weitere Namen: Mallory (aktiver Angreifer), Trent (vertrauensw√ºrdige dritte Partei)."
  },
  {id:"x06", topic:"gesellschaft", type:"tf", diff:2, tax:"K2",
   q:"Das Schloss-Symbol im Browser (HTTPS) zeigt an, dass die Website vertrauensw√ºrdig und sicher ist.",
   correct: false,
   explain:"Falsch. Das Schloss zeigt nur an, dass die Verbindung verschl√ºsselt ist (Vertraulichkeit). Eine Phishing-Seite kann ebenfalls HTTPS nutzen. HTTPS sch√ºtzt die √úbertragung, sagt aber nichts √ºber die Vertrauensw√ºrdigkeit des Inhalts oder des Betreibers der Website aus."
  },
  {id:"x07", topic:"sicherheit", type:"mc", diff:2, tax:"K3",
   q:"Ein Sch√ºler schickt im Unterricht einen Zettel mit einer Nachricht an einen Mitsch√ºler. Die Lehrperson f√§ngt den Zettel ab und liest ihn. Welches Sicherheitsziel ist verletzt?",
   options:[
     {v:"A", t:"Integrit√§t"},
     {v:"B", t:"Authentizit√§t"},
     {v:"C", t:"Vertraulichkeit"},
     {v:"D", t:"Verf√ºgbarkeit"}
   ],
   correct:"C",
   explain:"Die Lehrperson hat die Nachricht gelesen, obwohl sie nicht die vorgesehene Empf√§ngerin ist ‚Äî das ist eine Verletzung der Vertraulichkeit. Wenn die Lehrperson den Zettel auch noch einbeh√§lt, w√§re zus√§tzlich die Verf√ºgbarkeit verletzt."
  },
  {id:"x08", topic:"verschluesselung", type:"fill", diff:2, tax:"K1",
   q:"Bei der Verschl√ºsselung wird der {0} mithilfe eines {1} in den {2} umgewandelt. Der Empf√§nger kehrt diesen Prozess um: Er {3} den Geheimtext.",
   blanks:[
     {answer:"Klartext", alts:["klartext", "Plaintext", "plaintext"]},
     {answer:"Schl√ºssels", alts:["schl√ºssels", "Schl√ºssel", "schl√ºssel", "Key", "Keys"]},
     {answer:"Geheimtext", alts:["geheimtext", "Chiffretext", "chiffretext", "Ciphertext"]},
     {answer:"entschl√ºsselt", alts:["Entschl√ºsselt", "dechiffriert"]}
   ],
   explain:"Verschl√ºsselung: Klartext + Schl√ºssel ‚Üí Geheimtext (Chiffretext). Entschl√ºsselung: Geheimtext + Schl√ºssel ‚Üí Klartext."
  },
  {id:"x09", topic:"symmasymm", type:"tf", diff:3, tax:"K4",
   q:"Wenn alle Kommunikation Ende-zu-Ende-verschl√ºsselt w√§re, k√∂nnte die Polizei gar keine Straftaten mehr im Internet verfolgen.",
   correct: false,
   explain:"Falsch. Verschl√ºsselung sch√ºtzt den Inhalt der Kommunikation, aber nicht die Metadaten (wer kommuniziert wann mit wem, wie oft, wie lange). Zudem gibt es weitere Ermittlungsmethoden: Beschlagnahmung von Ger√§ten, verdeckte Ermittlungen, Zeugenbefragungen etc. Verschl√ºsselung erschwert die Arbeit der Polizei, macht sie aber nicht unm√∂glich."
  },
  {id:"x10", topic:"blockchain", type:"tf", diff:2, tax:"K2",
   q:"Bei Bitcoin sind alle Transaktionen f√ºr jeden √∂ffentlich einsehbar.",
   correct: true,
   explain:"Richtig. Die Bitcoin-Blockchain ist vollst√§ndig transparent ‚Äî jede Transaktion ist √∂ffentlich einsehbar. Was gesch√ºtzt ist, sind die Identit√§ten hinter den Bitcoin-Adressen (Pseudonymit√§t, nicht Anonymit√§t). Mit gen√ºgend Analyse k√∂nnen Adressen aber oft realen Personen zugeordnet werden."
  },

  // ‚îÄ‚îÄ LEHRBUCH-ERG√ÑNZUNGEN (Fit f√ºrs Studium Informatik, Kap. 15) ‚îÄ‚îÄ
  {id:"l01", topic:"verschluesselung", type:"mc", diff:1, tax:"K1",
   q:"Die Skytale gilt als eines der √§ltesten bekannten Verschl√ºsselungsverfahren. Wie funktioniert sie?",
   options:[
     {v:"A", t:"Ein Streifen Stoff wird spiralf√∂rmig um einen Holzstab gerollt und der Klartext darauf geschrieben. Abgewickelt erscheinen die Buchstaben in einer anderen Reihenfolge."},
     {v:"B", t:"Buchstaben werden durch Zahlen ersetzt."},
     {v:"C", t:"Der Text wird r√ºckw√§rts geschrieben."},
     {v:"D", t:"Jeder Buchstabe wird durch den n√§chsten im Alphabet ersetzt."}
   ],
   correct:"A",
   explain:"Die Skytale wurde von den Spartanern vor √ºber 2500 Jahren benutzt. Der abgewickelte Streifen enth√§lt die Buchstaben in einer ver√§nderten Reihenfolge (Transposition). Nur mit einem Stab gleichen Durchmessers kann die Nachricht wieder gelesen werden."
  },
  {id:"l02", topic:"verschluesselung", type:"sort", diff:2, tax:"K2",
   q:"Ordnen Sie die Verschl√ºsselungsverfahren: Handelt es sich um eine Substitution (Buchstaben ersetzen) oder eine Transposition (Reihenfolge √§ndern)?",
   categories:["Substitution", "Transposition"],
   items:[
     {t:"Caesar-Verschl√ºsselung", cat:0},
     {t:"Skytale", cat:1},
     {t:"Allgemeine monoalphabetische Chiffre", cat:0},
     {t:"Buchstaben eines Textes nach einem Muster umordnen", cat:1},
     {t:"ROT13 (Verschiebung um 13)", cat:0}
   ],
   explain:"Substitution ersetzt Buchstaben durch andere (Caesar, allgemeine Chiffre, ROT13). Transposition √§ndert die Reihenfolge der Buchstaben, ohne sie zu ersetzen (Skytale, Spaltentransposition)."
  },
  {id:"l03", topic:"verschluesselung", type:"mc", diff:2, tax:"K2",
   q:"Eine allgemeine Substitutions-Chiffre (jeder Buchstabe wird durch einen beliebigen anderen ersetzt) hat 26! ‚âà 4¬∑10¬≤‚Å∂ m√∂gliche Schl√ºssel. Warum ist Brute Force hier nicht mehr m√∂glich, die H√§ufigkeitsanalyse aber schon?",
   options:[
     {v:"A", t:"Weil 26! zu viele M√∂glichkeiten zum Durchprobieren sind, aber gleiche Buchstaben immer gleich ersetzt werden ‚Äî die H√§ufigkeitsverteilung bleibt erhalten."},
     {v:"B", t:"Weil Brute Force nur bei digitalen Verfahren funktioniert."},
     {v:"C", t:"Weil die H√§ufigkeitsanalyse nur bei deutschen Texten funktioniert."},
     {v:"D", t:"Weil 26! eine Primzahl ist."}
   ],
   correct:"A",
   explain:"Bei der monoalphabetischen Substitution wird jeder Buchstabe immer durch denselben Buchstaben ersetzt. Deshalb spiegelt der Geheimtext die Buchstabenh√§ufigkeit des Klartexts wider: Der h√§ufigste Buchstabe im Geheimtext entspricht vermutlich dem 'E'. So kann man den Text schrittweise entschl√ºsseln."
  },
  {id:"l04", topic:"symmasymm", type:"mc", diff:1, tax:"K2",
   q:"Im Lehrbuch wird symmetrische Verschl√ºsselung mit einer Kiste und einem Zahlenschloss erkl√§rt. Was ist das Problem bei dieser Analogie?",
   options:[
     {v:"A", t:"Die Kiste ist zu klein f√ºr lange Nachrichten."},
     {v:"B", t:"Bob und Alice m√ºssen sich vorher treffen, um den Code auszutauschen ‚Äî √ºber das Internet ist das nicht m√∂glich."},
     {v:"C", t:"Zahlenschl√∂sser sind unsicher."},
     {v:"D", t:"Es gibt kein Problem ‚Äî die Analogie ist perfekt."}
   ],
   correct:"B",
   explain:"Die Kisten-Analogie zeigt das zentrale Problem symmetrischer Verschl√ºsselung: Der Schl√ºssel (Code des Zahlenschlosses) muss auf einem sicheren Weg √ºbermittelt werden. Wenn Alice und Bob sich nur √ºber das Internet kennen, k√∂nnen sie sich nicht einfach treffen."
  },
  {id:"l05", topic:"symmasymm", type:"mc", diff:2, tax:"K2",
   q:"Asymmetrische Verschl√ºsselung wird im Lehrbuch mit einer Kiste und einem Vorh√§ngeschloss erkl√§rt. Alice verteilt offene Vorh√§ngeschl√∂sser. Was entspricht dem √∂ffentlichen und was dem privaten Schl√ºssel?",
   options:[
     {v:"A", t:"Das offene Vorh√§ngeschloss = √∂ffentlicher Schl√ºssel, der Schl√ºssel zum √ñffnen = privater Schl√ºssel."},
     {v:"B", t:"Das Vorh√§ngeschloss = privater Schl√ºssel, die Kiste = √∂ffentlicher Schl√ºssel."},
     {v:"C", t:"Beides sind √∂ffentliche Schl√ºssel."},
     {v:"D", t:"Das Vorh√§ngeschloss = symmetrischer Schl√ºssel."}
   ],
   correct:"A",
   explain:"Das offene Vorh√§ngeschloss kann Alice frei verteilen (Public Key) ‚Äî jeder kann die Kiste damit zuschliessen. Aber nur Alice hat den passenden Schl√ºssel zum √ñffnen (Private Key). Genau so funktioniert asymmetrische Verschl√ºsselung."
  },
  {id:"l06", topic:"symmasymm", type:"sort", diff:2, tax:"K1",
   q:"Ordnen Sie die Verfahren: Welche sind symmetrische und welche asymmetrische Verschl√ºsselungsverfahren?",
   categories:["Symmetrisch", "Asymmetrisch"],
   items:[
     {t:"Caesar-Verschl√ºsselung", cat:0},
     {t:"DES (Data Encryption Standard)", cat:0},
     {t:"RSA", cat:1},
     {t:"AES (Advanced Encryption Standard)", cat:0},
     {t:"Triple-DES", cat:0}
   ],
   explain:"Caesar, DES, Triple-DES und AES sind symmetrische Verfahren (ein Schl√ºssel). RSA ist das bekannteste asymmetrische Verfahren (Schl√ºsselpaar). DES gilt heute als unsicher (56-Bit-Schl√ºssel), AES ist der aktuelle Standard."
  },
  {id:"l07", topic:"verschluesselung", type:"tf", diff:2, tax:"K2",
   q:"DES (Data Encryption Standard) gilt heute als sicher, weil er einen 56-Bit-Schl√ºssel verwendet.",
   correct: false,
   explain:"Falsch. 56 Bit sind f√ºr heutige Computer zu wenig ‚Äî ein Brute-Force-Angriff ist m√∂glich. Deshalb wurde DES durch Triple-DES (dreifache Anwendung) und schliesslich durch AES (Advanced Encryption Standard) mit Schl√ºssell√§ngen von 128, 192 oder 256 Bit ersetzt."
  },
  {id:"l08", topic:"symmasymm", type:"mc", diff:3, tax:"K3",
   q:"Das RSA-Verfahren basiert auf der Schwierigkeit der Primfaktorzerlegung. 37 ¬∑ 43 = 1591 ist leicht zu berechnen. Warum ist der umgekehrte Weg (die Primfaktoren von 1591 finden) schwierig?",
   options:[
     {v:"A", t:"Weil Division schwieriger ist als Multiplikation."},
     {v:"B", t:"Weil es keinen effizienten Algorithmus gibt, der bei sehr grossen Zahlen (mehrere hundert Stellen) die Primfaktoren in vern√ºnftiger Zeit findet."},
     {v:"C", t:"Weil Primzahlen geheim sind."},
     {v:"D", t:"Weil Computer nicht dividieren k√∂nnen."}
   ],
   correct:"B",
   explain:"Multiplikation ist einfach: 37 ¬∑ 43 = 1591. Aber bei Zahlen mit mehreren hundert Stellen gibt es keinen bekannten Algorithmus, der die Primfaktoren effizient findet. Diese Einweg-Eigenschaft (leicht in eine Richtung, schwer zur√ºck) ist die Grundlage der RSA-Sicherheit."
  },
  {id:"l09", topic:"verschluesselung", type:"mc", diff:2, tax:"K2",
   q:"Was ist eine Hashfunktion?",
   options:[
     {v:"A", t:"Ein Verschl√ºsselungsverfahren mit zwei Schl√ºsseln."},
     {v:"B", t:"Eine mathematische Funktion, die aus einer beliebig grossen Eingabe einen Wert fester L√§nge berechnet (Pr√ºfsumme). Schon kleinste √Ñnderungen ergeben einen v√∂llig anderen Hash."},
     {v:"C", t:"Eine Methode, um Passw√∂rter zu speichern."},
     {v:"D", t:"Eine Komprimierungsmethode f√ºr grosse Dateien."}
   ],
   correct:"B",
   explain:"Eine Hashfunktion berechnet aus beliebigen Daten eine Pr√ºfsumme fester L√§nge. Wichtige Eigenschaften: Determinismus (gleiche Eingabe = gleicher Hash), Einweg (vom Hash kann man nicht auf die Eingabe schliessen), Kollisionsresistenz (verschiedene Eingaben sollen verschiedene Hashes ergeben)."
  },
  {id:"l10", topic:"verschluesselung", type:"tf", diff:2, tax:"K2",
   q:"Wenn zwei verschiedene Eingaben denselben Hashwert erzeugen, spricht man von einer Kollision.",
   correct: true,
   explain:"Richtig. Eine Kollision tritt auf, wenn zwei verschiedene Eingaben denselben Hashwert produzieren. Gute Hashfunktionen minimieren die Wahrscheinlichkeit von Kollisionen. Bei kryptographischen Hashfunktionen soll es praktisch unm√∂glich sein, gezielt eine Kollision zu erzeugen."
  },
  {id:"l11", topic:"symmasymm", type:"mc", diff:2, tax:"K2",
   q:"Was ist eine digitale Signatur und wie funktioniert sie?",
   options:[
     {v:"A", t:"Ein eingescanntes Bild einer handschriftlichen Unterschrift."},
     {v:"B", t:"Der Absender bildet den Hash des Dokuments und verschl√ºsselt diesen mit seinem privaten Schl√ºssel. Der Empf√§nger pr√ºft mit dem √∂ffentlichen Schl√ºssel des Absenders."},
     {v:"C", t:"Ein Passwort, das an das Dokument angeh√§ngt wird."},
     {v:"D", t:"Eine symmetrische Verschl√ºsselung des gesamten Dokuments."}
   ],
   correct:"B",
   explain:"Eine digitale Signatur funktioniert so: 1) Hash des Dokuments berechnen. 2) Hash mit dem privaten Schl√ºssel verschl√ºsseln (= Signatur). 3) Empf√§nger entschl√ºsselt die Signatur mit dem √∂ffentlichen Schl√ºssel und vergleicht mit dem selbst berechneten Hash. Stimmen sie √ºberein, ist das Dokument authentisch und unver√§ndert."
  },
  {id:"l12", topic:"verschluesselung", type:"mc", diff:3, tax:"K2",
   q:"Was ist ein One-Time-Pad und warum gilt es als theoretisch unknackbar?",
   options:[
     {v:"A", t:"Ein Passwort, das nur einmal verwendet wird."},
     {v:"B", t:"Eine symmetrische Verschl√ºsselung, bei der der Schl√ºssel zuf√§llig ist, genauso lang wie die Nachricht und nur einmal verwendet wird. Da der Schl√ºssel keine Muster hat, gibt die H√§ufigkeitsanalyse keine Hinweise."},
     {v:"C", t:"Ein Notizbuch mit geheimen Codes."},
     {v:"D", t:"Eine Verschl√ºsselung, die nur auf Papier funktioniert."}
   ],
   correct:"B",
   explain:"Das One-Time-Pad ist eine Abwandlung der Caesar-Verschl√ºsselung: Statt alle Zeichen um denselben Wert zu verschieben, wird jedes Zeichen um einen anderen, zuf√§lligen Wert verschoben. Bedingungen: Schl√ºssel muss zuf√§llig sein, mindestens so lang wie die Nachricht, und darf nie wiederverwendet werden. In der Praxis ist es unpraktisch, da der Schl√ºssel sicher √ºbermittelt werden muss."
  },
  {id:"l13", topic:"verschluesselung", type:"mc", diff:3, tax:"K4",
   q:"Im Zweiten Weltkrieg verschl√ºsselten die Deutschen ihre Nachrichten mit der Enigma-Maschine. Wie gelang es den Alliierten um Alan Turing, die Verschl√ºsselung zu knacken?",
   options:[
     {v:"A", t:"Sie stahlen eine Enigma-Maschine und kopierten den Schl√ºssel."},
     {v:"B", t:"Sie nutzten bekannte Textteile (z.B. t√§gliche Wetterberichte begannen mit WETTERVORHERSAGE), um die Menge m√∂glicher Schl√ºssel zu reduzieren."},
     {v:"C", t:"Sie verwendeten Brute Force mit Computern."},
     {v:"D", t:"Die Enigma hatte einen bekannten Fehler im Algorithmus."}
   ],
   correct:"B",
   explain:"Die Alliierten nutzten sogenannte Known-Plaintext-Angriffe: Da sie wussten, dass deutsche Nachrichten oft mit vorhersagbaren W√∂rtern begannen (z.B. WETTERVORHERSAGE), konnten sie die Menge der m√∂glichen Schl√ºssel stark einschr√§nken. Da die Deutschen ihren Schl√ºssel t√§glich wechselten, musste der gefundene Schl√ºssel schnell auf andere Nachrichten desselben Tages angewendet werden."
  },
  {id:"l14", topic:"symmasymm", type:"mc", diff:2, tax:"K2",
   q:"Warum werden in der Praxis Hybridverfahren eingesetzt, die symmetrische und asymmetrische Verschl√ºsselung kombinieren?",
   options:[
     {v:"A", t:"Weil Hybridverfahren billiger sind."},
     {v:"B", t:"Weil asymmetrische Verschl√ºsselung das Schl√ºsselaustausch-Problem l√∂st, aber rechenaufwendig ist ‚Äî die eigentlichen Daten werden dann schnell und symmetrisch verschl√ºsselt."},
     {v:"C", t:"Weil symmetrische Verschl√ºsselung allein nicht existiert."},
     {v:"D", t:"Weil Hybridverfahren nur einen Schl√ºssel brauchen."}
   ],
   correct:"B",
   explain:"Hybridverfahren nutzen das Beste beider Welten: Zuerst wird ein zuf√§lliger symmetrischer Schl√ºssel (Session Key) asymmetrisch verschl√ºsselt und sicher √ºbertragen. Dann werden die eigentlichen Daten symmetrisch verschl√ºsselt ‚Äî das ist viel schneller. So funktioniert z.B. HTTPS/TLS beim Onlinebanking."
  },
  {id:"l15", topic:"verschluesselung", type:"calc", diff:2, tax:"K3",
   q:"Entschl√ºsseln Sie die folgende Caesar-Chiffre. Das Beispiel aus dem Lehrbuch: 'Glh Zxhuiho vlqg jhidoohq.' ‚Äî Verschiebung = 3. Geben Sie die Position des entschl√ºsselten ersten Buchstabens ein (A=1, B=2, ... Z=26).",
   rows:[
     {label:"G (Position 7) minus 3 =", answer:4, tolerance:0, unit:"(=D)"},
     {label:"Z (Position 26) minus 3 =", answer:23, tolerance:0, unit:"(=W)"},
     {label:"I (Position 9) minus 3 =", answer:6, tolerance:0, unit:"(=F)"}
   ],
   explain:"Entschl√ºsselung bei Caesar: Jeden Buchstaben um 3 zur√ºckverschieben. G(7)-3=D(4), Z(26)-3=W(23), I(9)-3=F(6). Der vollst√§ndige Klartext lautet: 'Die Wuerfel sind gefallen.' ‚Äî ein ber√ºhmtes Caesar-Zitat!"
  }
];

// Topic metadata
const TOPICS = {
  sicherheit: {label:"Sicherheitsziele", short:"Sicherheitsziele"},
  verschluesselung: {label:"Verschl√ºsselung & Grundlagen", short:"Verschl√ºsselung"},
  symmasymm: {label:"Symmetrisch vs. Asymmetrisch", short:"Sym./Asym."},
  blockchain: {label:"Blockchain", short:"Blockchain"},
  gesellschaft: {label:"Gesellschaft & Ethik", short:"Gesellschaft"}
};

// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
// APP STATE & LOGIC (identisch zum BIP-Pool)
// ‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê
let state = {
  mode: 'fokus',
  queue: [], current: 0, score: 0, maxScore: 0, answered: [], wrong: []
};

function init() {
  const topicChips = document.getElementById('topicChips');
  for (const [key, val] of Object.entries(TOPICS)) {
    const count = QUESTIONS.filter(q => q.topic === key).length;
    const chip = document.createElement('div');
    chip.className = 'chip';
    chip.dataset.topic = key;
    chip.innerHTML = val.short + ' <span class="chip-count">' + count + '</span>';
    chip.onclick = function() { toggleChip(this, 'topic'); };
    topicChips.appendChild(chip);
  }
  updateQuestionCount();
}

function selectMode(el) {
  document.querySelectorAll('.mode-card').forEach(c => c.classList.remove('selected'));
  el.classList.add('selected');
  state.mode = el.dataset.mode;
  applyModeDefaults();
  updateQuestionCount();
}

function applyModeDefaults() {
  if (state.mode === 'fokus') {
    document.querySelectorAll('#topicChips .chip').forEach(c => c.classList.remove('selected'));
    document.querySelectorAll('#diffChips .chip').forEach(c => c.classList.remove('selected'));
    document.querySelectorAll('#typeChips .chip').forEach(c => c.classList.add('selected'));
  } else {
    document.querySelectorAll('#topicChips .chip').forEach(c => c.classList.add('selected'));
    document.querySelectorAll('#diffChips .chip').forEach(c => c.classList.add('selected'));
    document.querySelectorAll('#typeChips .chip').forEach(c => c.classList.add('selected'));
  }
}

function toggleChip(el) { el.classList.toggle('selected'); updateQuestionCount(); }

function getSelectedFilters() {
  return {
    topics: [...document.querySelectorAll('#topicChips .chip.selected')].map(c => c.dataset.topic),
    diffs: [...document.querySelectorAll('#diffChips .chip.selected')].map(c => parseInt(c.dataset.diff)),
    types: [...document.querySelectorAll('#typeChips .chip.selected')].map(c => c.dataset.type)
  };
}

function getFilteredQuestions() {
  const f = getSelectedFilters();
  return QUESTIONS.filter(q => f.topics.includes(q.topic) && f.diffs.includes(q.diff) && f.types.includes(q.type));
}

function updateQuestionCount() {
  const filtered = getFilteredQuestions();
  const info = document.getElementById('questionCountInfo');
  const btn = document.getElementById('startBtn');
  if (filtered.length === 0) {
    info.textContent = 'Keine Aufgaben mit diesen Filtern verf√ºgbar.';
    btn.disabled = true;
  } else {
    info.textContent = filtered.length + ' Aufgaben verf√ºgbar ‚Äî Sie k√∂nnen jederzeit aufh√∂ren.';
    btn.disabled = false;
  }
}

function startQuiz() {
  let pool = getFilteredQuestions();
  if (pool.length === 0) return;
  if (state.mode === 'fokus') pool.sort((a, b) => a.diff - b.diff || a.id.localeCompare(b.id));
  else pool = shuffle([...pool]);
  state.queue = pool; state.current = 0; state.score = 0; state.maxScore = 0; state.answered = []; state.wrong = [];
  showScreen('quizScreen');
  renderQuestion();
}

function renderQuestion() {
  const q = state.queue[state.current];
  const total = state.queue.length;
  document.getElementById('quizCounter').textContent = 'Aufgabe ' + (state.current + 1) + ' / ' + total;
  document.getElementById('quizScore').textContent = state.score + ' Punkt' + (state.score !== 1 ? 'e' : '');
  document.getElementById('quizProgressFill').style.width = ((state.current / total) * 100) + '%';

  const diffLabels = {1:'Einfach', 2:'Mittel', 3:'Schwer'};
  const typeLabels = {mc:'Multiple Choice', tf:'Richtig/Falsch', fill:'L√ºckentext', calc:'Berechnung', sort:'Zuordnung'};

  let html = '<div class="q-card" id="currentQ">';
  html += '<div class="q-badges">';
  html += '<span class="q-badge badge-topic">' + TOPICS[q.topic].short + '</span>';
  html += '<span class="q-badge badge-diff-' + q.diff + '">' + diffLabels[q.diff] + '</span>';
  html += '<span class="q-badge badge-type">' + typeLabels[q.type] + '</span>';
  html += '<span class="q-badge badge-tax">' + q.tax + '</span>';
  html += '</div>';

  if (q.type === 'mc') {
    html += '<div class="q-text">' + q.q + '</div><div class="q-options" id="qOpts">';
    q.options.forEach(o => {
      html += '<div class="q-opt" data-value="' + o.v + '" onclick="selectOpt(this)"><div class="q-opt-marker">' + o.v + '</div><div>' + o.t + '</div></div>';
    });
    html += '</div><div class="btn-row"><button class="btn btn-check" onclick="checkMCQ()">√úberpr√ºfen</button></div>';
  }
  else if (q.type === 'tf') {
    html += '<div class="q-text">' + q.q + '</div><div class="q-options" id="qOpts">';
    html += '<div class="q-opt" data-value="true" onclick="selectOpt(this)"><div class="q-opt-marker">R</div><div>Richtig</div></div>';
    html += '<div class="q-opt" data-value="false" onclick="selectOpt(this)"><div class="q-opt-marker">F</div><div>Falsch</div></div>';
    html += '</div><div class="btn-row"><button class="btn btn-check" onclick="checkTFQ()">√úberpr√ºfen</button></div>';
  }
  else if (q.type === 'fill') {
    let text = q.q;
    q.blanks.forEach((b, i) => { text = text.replace('{' + i + '}', '<input class="q-fill-input" data-idx="' + i + '" placeholder="‚Ä¶">'); });
    html += '<div class="q-text" style="font-weight:400; line-height:2.2;">' + text + '</div>';
    html += '<div class="btn-row"><button class="btn btn-check" onclick="checkFillQ()">√úberpr√ºfen</button></div>';
  }
  else if (q.type === 'calc') {
    html += '<div class="q-text">' + q.q + '</div><div style="display:flex; flex-direction:column; gap:10px;">';
    q.rows.forEach((r, i) => {
      html += '<div style="display:flex; align-items:center; gap:10px; font-size:0.92rem; flex-wrap:wrap;">';
      html += '<span style="min-width:200px;">' + r.label + '</span>';
      html += '<input class="q-calc-input" data-idx="' + i + '" placeholder="?"> <span>' + (r.unit || '') + '</span></div>';
    });
    html += '</div><div class="btn-row"><button class="btn btn-check" onclick="checkCalcQ()">√úberpr√ºfen</button></div>';
  }
  else if (q.type === 'sort') {
    html += '<div class="q-text">' + q.q + '</div>';
    html += '<p style="font-size:0.82rem; color:var(--c-text-soft); margin-bottom:14px;">W√§hlen Sie einen Begriff aus, dann klicken Sie auf die Kategorie, in die er geh√∂rt.</p>';
    html += '<div id="sortArea">';
    html += '<div class="filter-label">Begriffe</div>';
    html += '<div id="sortPool" style="display:flex; flex-wrap:wrap; gap:6px; padding:10px; border:2px solid var(--c-border); border-radius:8px; min-height:44px; margin-bottom:14px; background:#f8fafc;">';
    const shuffled = shuffle([...q.items]);
    shuffled.forEach((item) => {
      html += '<div class="chip" data-sort-idx="' + q.items.indexOf(item) + '" onclick="selectSortItem(this)" style="cursor:pointer;">' + item.t + '</div>';
    });
    html += '</div>';
    q.categories.forEach((cat, ci) => {
      html += '<div style="margin-bottom:10px;"><div class="filter-label">' + cat + '</div>';
      html += '<div class="sort-drop" data-cat="' + ci + '" onclick="placeSortItem(this)" style="min-height:44px; padding:10px; border:2px dashed var(--c-border); border-radius:8px; display:flex; flex-wrap:wrap; gap:6px; cursor:pointer; transition: border-color 0.15s; background:white;"></div></div>';
    });
    html += '</div><div class="btn-row"><button class="btn btn-check" onclick="checkSortQ()">√úberpr√ºfen</button></div>';
  }

  html += '<div class="q-feedback" id="qFeedback"></div>';
  html += '<div class="btn-row" id="nextRow" style="display:none;">';
  html += state.current < state.queue.length - 1
    ? '<button class="btn btn-next" onclick="nextQuestion()">N√§chste Aufgabe ‚Üí</button>'
    : '<button class="btn btn-next" onclick="endQuiz()">Auswertung anzeigen ‚Üí</button>';
  html += '</div></div>';
  document.getElementById('quizContent').innerHTML = html;
}

function selectOpt(el) {
  if (el.closest('.q-options').dataset.locked) return;
  el.closest('.q-options').querySelectorAll('.q-opt').forEach(o => o.classList.remove('selected'));
  el.classList.add('selected');
}

let selectedSortChip = null;
function selectSortItem(el) {
  if (el === selectedSortChip) { el.classList.remove('selected'); selectedSortChip = null; clearDropHighlights(); return; }
  if (selectedSortChip) selectedSortChip.classList.remove('selected');
  selectedSortChip = el; el.classList.add('selected');
  document.querySelectorAll('.sort-drop').forEach(d => { d.style.borderColor = 'var(--c-accent)'; d.style.borderStyle = 'solid'; });
}
function placeSortItem(dropEl) {
  if (!selectedSortChip) return;
  dropEl.appendChild(selectedSortChip);
  selectedSortChip.classList.remove('selected');
  selectedSortChip.onclick = function() { returnSortItem(this); };
  selectedSortChip = null; clearDropHighlights();
}
function returnSortItem(el) {
  document.getElementById('sortPool').appendChild(el);
  el.onclick = function() { selectSortItem(this); }; el.classList.remove('selected');
}
function clearDropHighlights() {
  document.querySelectorAll('.sort-drop').forEach(d => { d.style.borderColor = 'var(--c-border)'; d.style.borderStyle = 'dashed'; });
}

function checkMCQ() {
  const q = state.queue[state.current]; const opts = document.getElementById('qOpts');
  if (opts.dataset.locked) return; const selected = opts.querySelector('.q-opt.selected'); if (!selected) return;
  opts.dataset.locked = 'true';
  opts.querySelectorAll('.q-opt').forEach(o => { o.classList.add('locked'); if (o.dataset.value === q.correct) o.classList.add('was-correct'); });
  const isCorrect = selected.dataset.value === q.correct;
  selected.classList.add(isCorrect ? 'correct' : 'wrong');
  if (isCorrect) state.score++; else state.wrong.push({q: q.q, explain: q.explain, topic: q.topic});
  state.maxScore++; state.answered.push({id: q.id, topic: q.topic, correct: isCorrect});
  showFeedback(isCorrect, q.explain);
}

function checkTFQ() {
  const q = state.queue[state.current]; const opts = document.getElementById('qOpts');
  if (opts.dataset.locked) return; const selected = opts.querySelector('.q-opt.selected'); if (!selected) return;
  opts.dataset.locked = 'true'; const userVal = selected.dataset.value === 'true'; const isCorrect = userVal === q.correct;
  opts.querySelectorAll('.q-opt').forEach(o => { o.classList.add('locked'); if ((o.dataset.value === 'true') === q.correct) o.classList.add('was-correct'); });
  selected.classList.add(isCorrect ? 'correct' : 'wrong');
  if (isCorrect) state.score++; else state.wrong.push({q: q.q, explain: q.explain, topic: q.topic});
  state.maxScore++; state.answered.push({id: q.id, topic: q.topic, correct: isCorrect});
  showFeedback(isCorrect, q.explain);
}

function checkFillQ() {
  const q = state.queue[state.current]; const inputs = document.querySelectorAll('.q-fill-input'); let correct = 0;
  inputs.forEach((inp, i) => {
    const b = q.blanks[i]; const user = inp.value.trim();
    const allAnswers = [b.answer, ...(b.alts || [])];
    if (allAnswers.some(a => a.toLowerCase() === user.toLowerCase())) { inp.classList.add('correct'); correct++; }
    else if (user) { inp.classList.add('wrong'); inp.title = 'L√∂sung: ' + b.answer; }
    inp.readOnly = true;
  });
  const total = q.blanks.length; const isCorrect = correct === total;
  if (isCorrect) state.score += total; else state.wrong.push({q: q.q.replace(/\{(\d+)\}/g, '___'), explain: q.explain, topic: q.topic});
  state.maxScore += total; state.answered.push({id: q.id, topic: q.topic, correct: isCorrect});
  showFeedback(isCorrect, q.explain + (isCorrect ? '' : '<br><strong>L√∂sungen:</strong> ' + q.blanks.map(b => b.answer).join(', ')));
}

function checkCalcQ() {
  const q = state.queue[state.current]; const inputs = document.querySelectorAll('.q-calc-input'); let correct = 0;
  inputs.forEach((inp, i) => {
    const r = q.rows[i]; const user = parseFloat(inp.value.replace(',', '.'));
    if (!isNaN(user) && Math.abs(user - r.answer) <= r.tolerance) { inp.classList.add('correct'); correct++; }
    else { inp.classList.add('wrong'); inp.title = 'L√∂sung: ' + r.answer; }
    inp.readOnly = true;
  });
  const total = q.rows.length; const isCorrect = correct === total;
  if (isCorrect) state.score += total; else state.wrong.push({q: q.q, explain: q.explain, topic: q.topic});
  state.maxScore += total; state.answered.push({id: q.id, topic: q.topic, correct: isCorrect});
  showFeedback(isCorrect, q.explain + (isCorrect ? '' : '<br><strong>L√∂sungen:</strong> ' + q.rows.map(r => r.answer + (r.unit||'')).join(', ')));
}

function checkSortQ() {
  const q = state.queue[state.current]; const drops = document.querySelectorAll('.sort-drop');
  let correct = 0; let total = q.items.length;
  drops.forEach((drop, ci) => {
    drop.querySelectorAll('.chip').forEach(chip => {
      const idx = parseInt(chip.dataset.sortIdx);
      if (q.items[idx].cat === ci) { chip.style.background = 'var(--c-success-bg)'; chip.style.borderColor = 'var(--c-success)'; chip.style.color = '#166534'; correct++; }
      else { chip.style.background = 'var(--c-error-bg)'; chip.style.borderColor = 'var(--c-error)'; chip.style.color = '#991b1b'; }
    });
  });
  document.querySelectorAll('#sortPool .chip').forEach(chip => { chip.style.background = 'var(--c-error-bg)'; chip.style.borderColor = 'var(--c-error)'; chip.style.color = '#991b1b'; });
  const isCorrect = correct === total;
  if (isCorrect) state.score += total; else state.wrong.push({q: q.q, explain: q.explain, topic: q.topic});
  state.maxScore += total; state.answered.push({id: q.id, topic: q.topic, correct: isCorrect});
  showFeedback(isCorrect, q.explain);
}

function showFeedback(isCorrect, explain) {
  const fb = document.getElementById('qFeedback');
  fb.className = 'q-feedback visible ' + (isCorrect ? 'success' : 'error');
  fb.innerHTML = (isCorrect ? '‚úì Korrekt! ' : '‚úó ') + explain;
  document.getElementById('nextRow').style.display = 'flex';
  document.getElementById('quizScore').textContent = state.score + ' Punkt' + (state.score !== 1 ? 'e' : '');
  fb.scrollIntoView({behavior: 'smooth', block: 'nearest'});
}

function nextQuestion() { state.current++; renderQuestion(); window.scrollTo({top: 0, behavior: 'smooth'}); }

function endQuiz() {
  showScreen('resultsScreen');
  const pct = state.maxScore > 0 ? Math.round((state.score / state.maxScore) * 100) : 0;
  document.getElementById('resultsScore').textContent = state.score + ' / ' + state.maxScore;
  document.getElementById('resultsLabel').textContent = pct + '% richtig';
  const bar = document.getElementById('resultsBarFill');
  bar.style.width = pct + '%';
  bar.style.background = pct >= 70 ? 'var(--c-success)' : pct >= 40 ? 'var(--c-accent)' : 'var(--c-error)';
  const breakdown = {};
  state.answered.forEach(a => { if (!breakdown[a.topic]) breakdown[a.topic] = {correct:0, total:0}; breakdown[a.topic].total++; if (a.correct) breakdown[a.topic].correct++; });
  let tbHtml = '';
  for (const [topic, data] of Object.entries(breakdown)) {
    const tpct = Math.round((data.correct / data.total) * 100);
    const cls = tpct >= 70 ? 'good' : tpct >= 40 ? 'ok' : 'bad';
    tbHtml += '<div class="topic-row"><span class="topic-name">' + TOPICS[topic].label + '</span><span class="topic-score ' + cls + '">' + data.correct + '/' + data.total + ' (' + tpct + '%)</span></div>';
  }
  document.getElementById('topicBreakdown').innerHTML = tbHtml;
  if (state.wrong.length > 0) {
    document.getElementById('wrongCard').style.display = 'block';
    let wHtml = '';
    state.wrong.forEach(w => { wHtml += '<div class="wrong-item"><div class="wi-q">' + TOPICS[w.topic].short + ': ' + w.q.substring(0, 120) + (w.q.length > 120 ? '‚Ä¶' : '') + '</div><div class="wi-a">' + w.explain + '</div></div>'; });
    document.getElementById('wrongList').innerHTML = wHtml;
  } else { document.getElementById('wrongCard').style.display = 'none'; }
}

function exportResults() { window.print(); }
function resetApp() { showScreen('startScreen'); state = {mode: state.mode, queue:[], current:0, score:0, maxScore:0, answered:[], wrong:[]}; }

function showScreen(id) { document.querySelectorAll('.screen').forEach(s => s.classList.remove('active')); document.getElementById(id).classList.add('active'); window.scrollTo({top:0}); }

function shuffle(arr) { for (let i = arr.length - 1; i > 0; i--) { const j = Math.floor(Math.random() * (i + 1)); [arr[i], arr[j]] = [arr[j], arr[i]]; } return arr; }

init();
</script>
</body>
</html>
